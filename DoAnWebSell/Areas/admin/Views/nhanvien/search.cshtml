@model IEnumerable<Model.EF.NhanVien>

@{
    ViewBag.Title = "Thông tin các nhân viên";
    Layout = "~/Areas/admin/Views/Shared/_Layouts.cshtml";
    var grid = new WebGrid(Model, canPage: true, defaultSort: "TenNV", rowsPerPage: 5);
}

@section header {
    Danh sách tìm kiếm
}

<div class="d-flex">
    <div class="w-75">@Html.ActionLink("Quay lại", "index")</div>
    <div>
        @using (Html.BeginForm("search", "nhanvien", FormMethod.Get))
        {
            <div class="flex-shrink-1">
                <div class="form-inline form-group">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search..." aria-label="Search" aria-describedby="basic-addon2" value="@ViewBag.TenNV" name="tenNV">
                        <div class="input-group-append">
                            <button class="btn btn-success" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<div id="gridContent">
    @grid.GetHtml(
        tableStyle: "table table-bordered table-hover",
        footerStyle: "grid-footer",
        fillEmptyRows: true,
        mode: WebGridPagerModes.Numeric,
        alternatingRowStyle: "alternatingRowStyle",
        columns: new[]  // colums in grid
        {
            grid.Column("STT",format: item => item.WebGrid.Rows.IndexOf(item) + 1 + Math.Round(Convert.ToDouble(grid.TotalRowCount / grid.PageCount) / grid.RowsPerPage) * grid.RowsPerPage * grid.PageIndex),
            grid.Column("MaNV","Mã nhân viên"),
            grid.Column("HoNV","Họ tên nhân viên"),
            grid.Column("TenNV","Tên nhân viên"),
            grid.Column("GioiTinh","Giới tính",format: (@item) => @item.GioiTinh==true?"Nam":"Nữ"),
            grid.Column("NgaySinh","Ngày sinh",format:@<text> @item.NgaySinh.ToString("dd/MM/yyyy")</text>),
            grid.Column("Luong","Tiền lương",format:@<text> @item.Luong.ToString("#,##0") VNĐ</text>),
            grid.Column("SDT","Số điện thoại"),
            grid.Column("DiaChi","Địa chỉ"),
            grid.Column("Email","Email"),
            grid.Column("BoPhan.TenBP","Bộ phận"),
            grid.Column("Chức năng", format: @<text>
        <a href="@Url.Action("edit", new { id = item.MaNV})" class="edit-btn"><abbr title="Cập nhật dữ liệu"><img src="/assets/admin/images/edit.png" width="20" height="20" /></abbr></a>
        <a href="@Url.Action("details", new { id = item.MaNV})" class="edit-btn"><abbr title="Xem chi tiết"><img src="/assets/admin/images/details.png" width="20" height="20" /></abbr></a>
        <a href="@Url.Action("delete", new { id = item.MaNV})" class="edit-btn"><abbr title="Xóa dữ liệu"><img src="/assets/admin/images/delete.png" width="20" height="20" /></abbr></a>
            </text>),
         }
    )
</div>